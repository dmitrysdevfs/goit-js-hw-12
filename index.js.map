{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createdGalleryCardTemplate = imgInfo => {\n  const uniqueTags = [\n    ...new Set(imgInfo.tags.split(',').map(tag => tag.trim())),\n  ].join(', ');\n\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n        <figure class=\"gallery-figure\">\n          <img\n            class=\"gallery-image\"\n            src=\"${imgInfo.webformatURL}\"\n            alt=\"${uniqueTags}\"\n          />\n          <figcaption class=\"image-stats\">\n            <div class=\"stat-item\">\n              <p class=\"stat-label\">Likes</p>\n              <p class=\"stat-value\">${imgInfo.likes}</p>\n            </div>\n            <div class=\"stat-item\">\n              <p class=\"stat-label\">Views</p>\n              <p class=\"stat-value\">${imgInfo.views}</p>\n            </div>\n            <div class=\"stat-item\">\n              <p class=\"stat-label\">Comments</p>\n              <p class=\"stat-value\">${imgInfo.comments}</p>\n            </div>\n            <div class=\"stat-item\">\n              <p class=\"stat-label\">Downloads</p>\n              <p class=\"stat-value\">${imgInfo.downloads}</p>\n            </div>\n          </figcaption>\n        </figure>\n      </a>\n    </li>\n  `;\n};\n","import axios from 'axios';\n\nconst apiKey = import.meta.env.VITE_API_KEY;\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: apiKey,\n      q: searchedQuery,\n      page: currentPage,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  };\n\n  return axios.get(`${BASE_URL}?`, axiosOptions);\n};\n","import { createdGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst searchFormEl = document.querySelector('.js-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader-wrapper');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nconst toastSettings = {\n  messageSize: '16',\n  messageColor: 'white',\n  backgroundColor: 'red',\n  position: 'topRight',\n  icon: 'fa-regular fa-circle-xmark',\n  progressBar: false,\n  timeout: 2000,\n  close: false,\n  maxWidth: '360px',\n};\n\nlet searchedQuery = '';\nlet page = 1;\nlet totalImages = 0;\nlet renderedImages = 0;\nlet lightbox;\n\nhideLoadMoreBtn();\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.search_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.show({\n        message: 'The field must be filled!',\n        ...toastSettings,\n      });\n\n      return;\n    }\n\n    page = 1;\n\n    showLoader();\n    galleryEl.innerHTML = '';\n\n    hideLoadMoreBtn();\n\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n    if (data.total === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        ...toastSettings,\n      });\n\n      galleryEl.innerHTML = '';\n\n      hideLoader();\n\n      searchFormEl.reset();\n\n      return;\n    }\n\n    totalImages = data.total;\n    renderedImages = data.hits.length;\n\n    console.log('Submit RendImgs: ', renderedImages);\n    console.log('Submit TotatImgs: ', totalImages);\n\n    if (data.total > 15) {\n      showLoadMoreBtn();\n    }\n\n    const galleryTemplate = data?.hits\n      .map(el => createdGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n\n    hideLoader();\n\n    searchFormEl.reset();\n\n    loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\n    showLightbox();\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nfunction showLoader() {\n  loaderEl.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loaderEl.style.display = 'none';\n}\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n\n    showLoader();\n\n    hideLoadMoreBtn();\n\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n\n    renderedImages += data.hits.length;\n    console.log('After LoadMore RendImgs: ', renderedImages);\n\n    const galleryTemplate = data?.hits\n      .map(el => createdGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    hideLoader();\n\n    showLightbox();\n\n    // renderedImages < totalImages ? showLoadMoreBtn() : hideLoadMoreBtn();\n    if (renderedImages < totalImages) {\n      showLoadMoreBtn();\n    } else {\n      hideLoadMoreBtn();\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nfunction showLoadMoreBtn() {\n  loadMoreBtnEl.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtnEl.style.display = 'none';\n}\n\nfunction showLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n"],"names":["createdGalleryCardTemplate","imgInfo","uniqueTags","tag","apiKey","BASE_URL","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","toastSettings","page","totalImages","renderedImages","lightbox","hideLoadMoreBtn","onSearchFormSubmit","event","iziToast","showLoader","data","hideLoader","showLoadMoreBtn","galleryTemplate","el","onLoadMoreBtnClick","showLightbox","error","SimpleLightbox"],"mappings":"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"}